$schema: "https://json-schema.org/draft/2020-12/schema"

id: "case"
title: Case
type: object
namespace: http://gdc.nci.nih.gov
program: '*'
project: '*'
category: administrative
description: >
  The collection of all data related to a specific subject in the
  context of a specific experiment.
additionalProperties: false
submittable: true
validators: null

systemProperties:
  - id
  - project_id
  - created_datetime
  - updated_datetime

required:
  - submitter_id
  - project_id
  - case_id

uniqueKeys:
  - [id]
  - [project_id, submitter_id]

links:
- backref: cases
  label: projects
  multiplicity: many_to_many
  name: projects
  required: false
  target_type: project
- backref: cases
  label: compounds
  multiplicity: many_to_many
  name: compounds
  required: false
  target_type: compound
- backref: cases
  label: phenotypes
  multiplicity: many_to_many
  name: phenotypes
  required: false
  target_type: phenotype
- label: same_as
  multiplicity: many_to_many
  name: same_as
  target_type: case

graph_element: vertex

properties:
  case_id:
    type: string
  cellline_attributes:
    type:
    - 'null'
    - object
  gdc_attributes:
    type:
    - 'null'
    - object
  gtex_attributes:
    type:
    - 'null'
    - object

  sex:
    type: string

  compounds:
    targets: 
      - type: 
          $ref: compound.yaml
    $ref: _definitions.yaml#/to_many
  phenotypes:
    $ref: _definitions.yaml#/to_many
  projects:
    targets: 
      - type: 
          $ref: project.yaml
        backref: cases
    $ref: _definitions.yaml#/to_many
  samples:
    targets: 
      - type: 
          $ref: sample.yaml
        backref: case
    $ref: _definitions.yaml#/to_many
  same_as:
    targets: 
      - type: 
          $ref: case.yaml
    $ref: _definitions.yaml#/to_many
  project_id:
    $ref: _definitions.yaml#/project_id
  submitter_id:
    type:
      - string
      - 'null'
  id:
    #$ref: _definitions.yaml#/UUID
    #systemAlias: node_id
    type: string
  comment:
    type: string
  type:
    type: string
  created_datetime:
    $ref: _definitions.yaml#/datetime
  updated_datetime:
    $ref: _definitions.yaml#/datetime
