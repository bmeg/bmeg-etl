name: gdc
outdir: ../../output/gdc_fhir/

config:
  schema: ../../schema
  dir: ../../source/gdc_fhir/META

inputs:
  condition:
    jsonLoad:
      input: "{{config.dir}}/Condition.ndjson"
  
  observation:
    jsonLoad:
      input: "{{config.dir}}/Observation.ndjson"

  documentReference:
    jsonLoad:
      input: "{{config.dir}}/DocumentReference.ndjson"

  patient:
    jsonLoad:
      input: "{{config.dir}}/Patient.ndjson"

  encounter:
    jsonLoad:
      input: "{{config.dir}}/Encounter.ndjson"

  procedure:
    jsonLoad:
      input: "{{config.dir}}/Procedure.ndjson"

  imagingStudy:
    jsonLoad:
      input: "{{config.dir}}/ImagingStudy.ndjson"

  researchStudy:
    jsonLoad:
      input: "{{config.dir}}/ResearchStudy.ndjson"

  medication:
    jsonLoad:
      input: "{{config.dir}}/Medication.ndjson"

  researchSubject:
    jsonLoad:
      input: "{{config.dir}}/ResearchSubject.ndjson"

  medicationAdministration:
    jsonLoad:
      input: "{{config.dir}}/MedicationAdministration.ndjson"

  specimen:
    jsonLoad:
      input: "{{config.dir}}/Specimen.ndjson"

pipelines:
  conditionValidate:
    - from: condition
    - objectValidate:
        schema: '{{config.schema}}'
        title: Condition
    - emit:
        name: condition

  observationValidate:
    - from: observation
    - objectValidate:
        schema: '{{config.schema}}'
        title: Observation
    - emit:
        name: observation

  documentReferenceValidate:
    - from: documentReference
    - objectValidate:
        schema: '{{config.schema}}'
        title: DocumentReference
    - emit:
        name: documentReference

  patientValidate:
    - from: patient
    - objectValidate:
        schema: '{{config.schema}}'
        title: Patient
    - emit:
        name: patient

  encounterValidate:
    - from: encounter
    - objectValidate:
        schema: '{{config.schema}}'
        title: Encounter
    - emit:
        name: encounter

  procedureValidate:
    - from: procedure
    - objectValidate:
        schema: '{{config.schema}}'
        title: Procedure
    - emit:
        name: procedure

  imagingStudyValidate:
    - from: imagingStudy
    - objectValidate:
        schema: '{{config.schema}}'
        title: ImagingStudy
    - emit:
        name: imagingStudy

  researchStudyValidate:
    - from: researchStudy
    - objectValidate:
        schema: '{{config.schema}}'
        title: ResearchStudy
    - emit:
        name: researchStudy

  medicationValidate:
    - from: medication
    - objectValidate:
        schema: '{{config.schema}}'
        title: Medication
    - emit:
        name: medication

  researchSubjectValidate:
    - from: researchSubject
    - objectValidate:
        schema: '{{config.schema}}'
        title: ResearchSubject
    - emit:
        name: researchSubject

  medicationAdministrationValidate:
    - from: medicationAdministration
    - objectValidate:
        schema: '{{config.schema}}'
        title: MedicationAdministration
    - emit:
        name: medicationAdministration

  specimenValidate:
    - from: specimen
    - objectValidate:
        schema: '{{config.schema}}'
        title: Specimen
    - emit:
        name: specimen
